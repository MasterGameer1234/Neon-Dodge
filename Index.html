<!DOCTYPE html>
<html>
<head>
<title>Neon Dodge ‚Äî By Michael</title>

<style>
    :root {
        --neon1: #ffb300;
        --neon2: #ff6f00;
        --player: #00eaff;
        --bg1: #000428;
        --bg2: #004e92;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        user-select: none;
    }

    body {
        background: #000;
        overflow: hidden;
        font-family: "Orbitron", Arial, sans-serif;
    }

    /* ‚¨õ FULLSCREEN CANVAS */
    canvas {
        display: block;
        width: 100vw;
        height: 100vh;
        background: linear-gradient(135deg, var(--bg1), var(--bg2));
        border: 8px solid var(--neon1);
        box-shadow:
            0 0 25px var(--neon1),
            inset 0 0 20px var(--neon2);
    }

    /* üéõ CENTER MENU */
    #menu {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: white;
        text-shadow: 0 0 10px var(--neon1);
        animation: fadein .8s ease-out;
    }

    @keyframes fadein {
        from { opacity: 0; transform: translate(-50%, -45%); }
        to   { opacity: 1; transform: translate(-50%, -50%); }
    }

    h1 {
        font-size: 60px;
        letter-spacing: 4px;
        margin-bottom: 10px;
        color: var(--neon1);
        text-shadow:
            0 0 10px var(--neon1),
            0 0 20px var(--neon2),
            0 0 40px var(--neon1);
    }
 h2 {
        font-size: 30px;
        letter-spacing: 4px;
        margin-bottom: 70px;
        color: var(--neon1);
        text-shadow:
            0 0 10px var(--neon1),
            0 0 20px var(--neon2),
            0 0 30px var(--neon1);
    }

    h3 {
        margin-bottom: 20px;
        color: #fff;
        font-size: 30px;
    }

    button {
        width: 200px;
        padding: 14px 18px;
        margin: 10px;
        font-size: 18px;
        font-weight: bold;
        border: none;
        border-radius: 8px;

        color: #000;
        background: var(--neon1);

        cursor: pointer;
        transition: 0.2s;
        box-shadow: 0 0 18px var(--neon1);
    }

    button:hover {
        background: var(--neon2);
        box-shadow: 0 0 25px var(--neon2);
        transform: scale(1.08);
    }
</style>
</head>

<body>

<div id="menu">
    <h1>NEON DODGE</h1>
    <h2> By Michael Bell </h2>
    <h3>Choose Difficulty</h3>
    <button onclick="startGame('easy')">Easy</button><br>
    <button onclick="startGame('normal')">Normal</button><br>
    <button onclick="startGame('hard')">Hard</button><br>
    <button onclick="startGame('insane')">Insane</button>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let keys = {};
let player, enemies, particles;
let startTime, gameOver, settings, currentLevel;
let spawnTimer = 0;

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);


/* üåà COLORS */
const COLORS = ["#ffb300", "#ff6f00", "#ffea00", "#ff0000", "#ff4081", "#ff9100"];

/* üéö DIFFICULTY */
const DIFFICULTY = {
    easy:   { enemySpeed: 1,   spawnRate: 1100 },
    normal: { enemySpeed: 1.7, spawnRate: 800 },
    hard:   { enemySpeed: 2.8, spawnRate: 500 },
    insane: { enemySpeed: 4.5, spawnRate: 260 }
};

/* üèÜ HIGH SCORE HANDLING */
function getHighScore(level) {
    return localStorage.getItem("neonScore_" + level) || 0;
}
function setHighScore(level, value) {
    localStorage.setItem("neonScore_" + level, value);
}

/* ‚ñ∂ START GAME */
function startGame(level) {
    currentLevel = level;
    settings = DIFFICULTY[level];
    document.getElementById("menu").style.display = "none";

    player = { x: canvas.width/2, y: canvas.height/2, size: 22, speed: 5 };
    enemies = [];
    particles = [];
    spawnTimer = 0;
    gameOver = false;
    startTime = Date.now();

    requestAnimationFrame(loop);
}

/* ENEMY SPAWNER */
function spawnEnemy() {
    const size = 22;

    enemies.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size,
        color: COLORS[Math.floor(Math.random()*COLORS.length)],
        speed: settings.enemySpeed + Math.random() * 1.1
    });
}

/* PARTICLES */
function emitParticles(x, y, color) {
    for (let i=0; i<14; i++) {
        particles.push({
            x, y,
            size: 3,
            vx: (Math.random()*2 - 1)*3,
            vy: (Math.random()*2 - 1)*3,
            alpha: 1,
            color
        });
    }
}

function updateParticles() {
    particles = particles.filter(p => p.alpha > 0);
    particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.alpha -= 0.03;
    });
}

/* PLAYER MOVEMENT */
function movePlayer() {
    if (keys["ArrowUp"] || keys["w"]) player.y -= player.speed;
    if (keys["ArrowDown"] || keys["s"]) player.y += player.speed;
    if (keys["ArrowLeft"] || keys["a"]) player.x -= player.speed;
    if (keys["ArrowRight"] || keys["d"]) player.x += player.speed;

    player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));
}

/* ENEMY MOVEMENT + COLLISION */
function updateEnemies() {
    enemies.forEach(e => {
        let dx = player.x - e.x;
        let dy = player.y - e.y;
        let dist = Math.hypot(dx, dy);

        e.x += (dx / dist) * e.speed;
        e.y += (dy / dist) * e.speed;

        if (dist < player.size) triggerGameOver();
    });
}

/* GLOW DRAWING */
function drawGlowRect(x, y, size, color) {
    ctx.shadowBlur = 20;
    ctx.shadowColor = color;
    ctx.fillStyle = color;
    ctx.fillRect(x, y, size, size);
    ctx.shadowBlur = 0;
}

/* RENDER */
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // particles
    particles.forEach(p => {
        ctx.globalAlpha = p.alpha;
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, p.size, p.size);
        ctx.globalAlpha = 1;
    });

    drawGlowRect(player.x, player.y, player.size, "#00eaff");

    enemies.forEach(e => drawGlowRect(e.x, e.y, e.size, e.color));

    // score
    let score = ((Date.now() - startTime)/1000).toFixed(1);
    let high = getHighScore(currentLevel);

    ctx.fillStyle = "white";
    ctx.font = "24px Orbitron";
    ctx.fillText(`Time: ${score}s`, 20, 40);
    ctx.fillText(`High (${currentLevel}): ${high}s`, 20, 75);
}

/* GAME OVER */
function triggerGameOver() {
    if (gameOver) return;
    gameOver = true;

    let score = ((Date.now() - startTime)/1000).toFixed(1);
    let high = getHighScore(currentLevel);

    if (score > high) setHighScore(currentLevel, score);

    emitParticles(player.x, player.y, "#00eaff");

    setTimeout(() => {
        alert(`üíÄ You Died (${currentLevel})\nSurvived: ${score}s\nHigh Score: ${Math.max(score, high)}s`);
        location.reload();
    }, 700);
}

/* MAIN LOOP */
function loop() {
    if (!gameOver) {
        movePlayer();

        spawnTimer += 16;
        if (spawnTimer >= settings.spawnRate) {
            spawnEnemy();
            spawnTimer = 0;
        }

        updateEnemies();
    }

    updateParticles();
    draw();

    requestAnimationFrame(loop);
}
</script>

</body>
</html>
